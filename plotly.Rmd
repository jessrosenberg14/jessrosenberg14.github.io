---
title: "Plotly"
output: 
  html_document:
    toc: true
    toc_float: true
---

```{r}
library(tidyverse)
library(p8105.datasets)
library(plotly)
library(leaflet)
library(tidygeocoder)
```

Filtering NYC restaurant data to include only critical flags with grades of B and C.
```{r}
data("rest_inspec")

nycrest =
  rest_inspec %>%
  filter(critical_flag %in% c("Critical")) %>%
  filter(boro == "MANHATTAN") %>%
  drop_na(score) %>%
  drop_na(grade) %>%
  filter(grade %in% c("B","C"))
```
Add NY, NY to address
```{r}
str_suffix = "New York, NY"

nyrest2 =
nycrest %>%
    mutate(address = str_c(building, street, " New York, NY"))

census_s1 = 
  nyrest2 %>%
  geocode(address = street, " " , method = "census", verbose = TRUE)

unique(pull(nycrest, street))
```

```{r}
census_s1 %>%
  sample_n(1000) %>%
  leaflet() %>%
  addProviderTiles(providers$CartoDB.Positron) %>%
  addCircleMarkers(~lat, ~long, radius = 1, color = ~pal(price))
```

